---
title: Installation
description: Install MultiTenantKit for Express (Node.js) or Supabase Edge Functions. Choose your deployment target.
lastUpdated: '2025-12-09'
---

## Choose Your Deployment

MultiTenantKit offers two SDK bundles optimized for different deployment scenarios:

| SDK | Best For | Runtime | Database Access |
|-----|----------|---------|-----------------|
| `@multitenantkit/sdk` | Express apps, Node.js servers, traditional hosting | Node.js | Raw SQL (PostgreSQL) |
| `@multitenantkit/sdk-supabase` | Supabase Edge Functions, serverless | Deno | Supabase JS Client |

<Callout type="info">
**Which should I choose?**
- **Express (Node.js)**: You control the server, have full database access, and deploy to traditional hosting (AWS, Vercel, Railway, etc.)
- **Supabase Edge Functions**: Serverless, globally distributed, zero server management. All endpoints run in a single "fat function" on Supabase's edge network.
</Callout>

---

## Option A: Express (Node.js)

### Prerequisites

- **Node.js 18+** or Bun 1.0+
- **TypeScript 5.0+**
- **PostgreSQL 13+** (for persistence)
- **Supabase Account** (for authentication)

### Install the SDK

```bash title="npm"
npm install @multitenantkit/sdk
```

```bash title="yarn"
yarn add @multitenantkit/sdk
```

For more granular control, install packages individually:

```bash
npm install @multitenantkit/composition \
  @multitenantkit/adapter-auth-supabase \
  @multitenantkit/adapter-transport-express \
  @multitenantkit/api-handlers
```

### Database Setup

> **Important**: When using Supabase, you **don't need to create a users table**. Supabase provides `auth.users` built-in, which MultiTenantKit uses automatically.

Run this SQL in your Supabase SQL Editor:

```sql
-- Organizations table
CREATE TABLE organizations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  owner_user_id UUID NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP NOT NULL DEFAULT NOW(),
  archived_at TIMESTAMP,
  deleted_at TIMESTAMP,
  -- Add your custom fields:
  name TEXT,
  industry TEXT
);

-- Organization Memberships table
CREATE TABLE organization_memberships (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID,
  username TEXT NOT NULL,
  organization_id UUID NOT NULL REFERENCES organizations(id),
  role_code TEXT NOT NULL CHECK (role_code IN ('owner', 'admin', 'member')),
  invited_at TIMESTAMP,
  joined_at TIMESTAMP,
  left_at TIMESTAMP,
  deleted_at TIMESTAMP,
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_orgs_owner ON organizations(owner_user_id);
CREATE INDEX idx_memberships_user ON organization_memberships(user_id);
CREATE INDEX idx_memberships_org ON organization_memberships(organization_id);
```

### Environment Variables

Create `.env` in your project root:

```bash title=".env"
# Database (Required)
DATABASE_URL=postgresql://user:password@localhost:5432/postgres

# Supabase Auth (Required)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key
```

| Variable | Description |
|----------|-------------|
| `DATABASE_URL` | PostgreSQL connection string |
| `SUPABASE_URL` | Your Supabase project URL |
| `SUPABASE_SERVICE_KEY` | Service role key (not anon key!) from Dashboard â†’ Settings â†’ API |

### Verify Installation

```typescript title="index.ts"
import 'dotenv/config';
import { createSupabaseExpressApp } from '@multitenantkit/sdk';

const app = createSupabaseExpressApp();

app.listen(3000, () => {
  console.log('ðŸš€ Server running on http://localhost:3000');
});
```

```bash
npx tsx index.ts
```

---

## Option B: Supabase Edge Functions

### Prerequisites

- **Supabase Project** with Edge Functions enabled
- **Supabase CLI** installed (`npm install -g supabase`)

### Create the Edge Function

No npm install needed! Import directly from esm.sh in your Edge Function:

```bash
# Initialize Supabase (if not already done)
supabase init

# Create the Edge Function
supabase functions new multitenantkit
```

### Database Setup

Edge Functions use the Supabase JS client, which requires a `profiles` table instead of querying `auth.users` directly.

Run the complete setup script in your Supabase SQL Editor:

ðŸ‘‰ **[View full SQL setup script on GitHub](https://github.com/multitenantkit/multitenantkit/blob/main/packages/adapters/persistence/supabase/sql/setup.sql)**

This script creates:
- **`profiles`** - User data synced with `auth.users` via trigger
- **`organizations`** - Organizations with owner reference
- **`organization_memberships`** - Membership relationships
- **Foreign keys, indexes, and RLS policies**

<Callout type="info">
**Why `profiles` instead of `auth.users`?** The `auth.users` table is not queryable via the Supabase JS client (PostgREST). The `profiles` table gives you full control over user data and custom fields.
</Callout>

### Write the Edge Function

Edit `supabase/functions/multitenantkit/index.ts`:

```typescript title="supabase/functions/multitenantkit/index.ts"
// IMPORTANT: Import createClient directly from esm.sh to avoid version conflicts
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
import { createSupabaseEdgeHandler } from 'https://esm.sh/@multitenantkit/sdk-supabase';

// Create Supabase client
const client = createClient(
  Deno.env.get('PROJECT_URL')!,
  Deno.env.get('SERVICE_ROLE_KEY')!
);

// Create the Edge Function handler
const handler = createSupabaseEdgeHandler({
  client,
  edgeOptions: {
    basePath: '/multitenantkit'
  }
});

Deno.serve(handler);
```

### Deploy

```bash
supabase functions deploy multitenantkit
```

Your API is now live at:
```
https://your-project.supabase.co/functions/v1/multitenantkit
```

---

## Next Steps

- [Quick Start](/docs/getting-started/quick-start) - Complete examples for both deployment options
- [Custom Fields](/docs/configuration/custom-fields) - Extend entities with your own fields
- [Use Cases](/docs/use-cases/overview) - Explore all 18 use cases
